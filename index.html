<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icon Lab — AI App Icon Generator</title>
    <meta name="description" content="Generate and iterate on app icon designs using OpenAI GPT Image. Test prompts, customize layers, backgrounds, and export production-ready icons.">

    <!-- Canonical -->
    <link rel="canonical" href="https://iconlab.app/">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Icon Lab — AI App Icon Generator">
    <meta property="og:description" content="Generate and iterate on app icon designs using OpenAI GPT Image. Test prompts, customize layers, and export production-ready icons.">
    <meta property="og:site_name" content="Icon Lab">
    <meta property="og:url" content="https://iconlab.app/">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Icon Lab — AI App Icon Generator">
    <meta name="twitter:description" content="Generate and iterate on app icon designs using OpenAI GPT Image. Test prompts, customize layers, and export production-ready icons.">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Vercel Analytics -->
    <script defer src="/_vercel/insights/script.js"></script>

    <!-- App CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<!-- ================================================
     TOPBAR
     ================================================ -->
<header class="topbar">
    <div class="topbar-left">
        <img src="assets/light.png" alt="Icon Lab" class="topbar-logo logo-dark">
        <img src="assets/dark.png" alt="Icon Lab" class="topbar-logo logo-light">
    </div>
    <div class="topbar-center"></div>
    <div class="topbar-right">
        <button class="topbar-btn" id="aboutBtn" title="About Icon Lab">
            <i data-lucide="info"></i>
        </button>
        <button class="topbar-btn" id="apiKeyBtn" title="API Key">
            <i data-lucide="key-round"></i>
        </button>
        <button class="topbar-btn" id="themeToggle" title="Toggle theme">
            <i data-lucide="moon" class="icon-moon"></i>
            <i data-lucide="sun" class="icon-sun"></i>
        </button>
    </div>
</header>
<div class="api-key-bar hidden" id="apiKeyBar">
    <input type="text" id="tokenInput" placeholder="OpenAI API key · stored locally in your browser" autocomplete="one-time-code" data-form-type="other" data-lpignore="true" data-1p-ignore>
    <button type="button" class="api-key-bar-toggle" id="apiKeyToggle" title="Show/hide key">
        <i data-lucide="eye"></i>
    </button>
</div>

<!-- ================================================
     MAIN AREA
     ================================================ -->
<div class="main">

    <!-- Left toolbar (floating) -->
    <div class="toolbar-left">
        <button class="toolbar-left-btn" id="galleryToggle" title="Gallery">
            <i data-lucide="folder"></i>
        </button>
    </div>

    <!-- Canvas area (centre) -->
    <div class="canvas-area">
        <div class="canvas-stack">
            <!-- Size selector -->
            <div class="size-selector disabled" id="sizeSelector">
                <div class="topbar-size-wrap" id="sizeDropdownWrap">
                    <button class="topbar-size-btn" id="sizeDropdownBtn">
                        <span id="sizeDropdownLabel">512px</span>
                        <i data-lucide="chevron-down" class="topbar-size-chevron"></i>
                    </button>
                    <div class="topbar-size-menu hidden" id="sizeDropdownMenu">
                        <button class="topbar-size-option" data-size="64">64px</button>
                        <button class="topbar-size-option" data-size="128">128px</button>
                        <button class="topbar-size-option" data-size="256">256px</button>
                        <button class="topbar-size-option active" data-size="512">512px</button>
                    </div>
                </div>
            </div>
            <!-- Preview frame -->
            <div class="preview-frame" id="previewFrame">
                <div class="preview-placeholder" id="previewPlaceholder"></div>
                <div class="editor-canvas-wrap hidden" id="editorCanvasWrap">
                    <div class="editor-icon-container" id="editorIconContainer"></div>
                </div>
            </div>
            <!-- Download button -->
            <button class="download-btn disabled" id="editorExportBtn" title="Download">
                <i data-lucide="archive"></i>
                <span>Download</span>
            </button>
        </div>
    </div>

    <!-- Right toolbar + panels (editor controls) -->
    <div class="toolbar-right disabled" id="toolbarRight">
        <div class="toolbar-right-btns">
            <button class="toolbar-right-btn" data-panel="panelBackground" title="Background">
                <i data-lucide="scan"></i>
            </button>
            <button class="toolbar-right-btn" data-panel="panelLayers" title="Layers">
                <i data-lucide="layers"></i>
            </button>
            <hr class="toolbar-right-divider" id="editorResetDivider">
            <button class="toolbar-right-btn btn-disabled" id="editorResetBtn" title="Reset all">
                <i data-lucide="rotate-ccw"></i>
            </button>
            <div class="toolbar-right-panel hidden" id="toolbarRightPanel">

            <!-- Background panel -->
            <div class="panel-float hidden" id="panelBackground">
                <div class="section-header">
                    <span class="section-title">Background</span>
                </div>
                <div class="section-content">
                    <div class="setting-row">
                        <span class="setting-label">Type</span>
                        <select id="editorBgType">
                            <option value="none">None (transparent)</option>
                            <option value="solid">Solid color</option>
                            <option value="gradient">Radial gradient</option>
                            <option value="linear">Linear gradient</option>
                            <option value="mesh">Mesh gradient</option>
                        </select>
                    </div>
                    <hr class="setting-divider" id="editorBgDivider">
                    <div class="setting-row" id="editorBgSolidRow">
                        <span class="setting-label">Color</span>
                        <div class="color-picker-wrap">
                            <input type="color" id="editorBgColor" value="#4A90D9">
                            <input type="text" class="slider-value color-hex-input" id="editorBgColorLabel" value="#4A90D9" maxlength="7" spellcheck="false">
                        </div>
                    </div>
                    <div id="editorBgGradientRows" class="hidden">
                        <div class="setting-row">
                            <span class="setting-label">Center</span>
                            <div class="color-picker-wrap">
                                <input type="color" id="editorGradientCenter" value="#5BC0EB">
                                <input type="text" class="slider-value color-hex-input" id="editorGradientCenterLabel" value="#5BC0EB" maxlength="7" spellcheck="false">
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Edge</span>
                            <div class="color-picker-wrap">
                                <input type="color" id="editorGradientEdge" value="#2E6EA6">
                                <input type="text" class="slider-value color-hex-input" id="editorGradientEdgeLabel" value="#2E6EA6" maxlength="7" spellcheck="false">
                            </div>
                        </div>
                    </div>
                    <div id="editorBgLinearRows" class="hidden">
                        <div class="setting-row">
                            <span class="setting-label">Angle</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorLinearAngle" class="range-slider" min="0" max="360" step="15" value="180">
                                </div>
                                <input type="number" class="slider-value" id="editorLinearAngleValue" min="0" max="360" value="180"><span class="slider-suffix">°</span>
                            </div>
                        </div>
                        <hr class="setting-divider">
                        <div class="setting-row">
                            <span class="setting-label">Start</span>
                            <div class="color-picker-wrap">
                                <input type="color" id="editorLinearStart" value="#5BC0EB">
                                <input type="text" class="slider-value color-hex-input" id="editorLinearStartLabel" value="#5BC0EB" maxlength="7" spellcheck="false">
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">End</span>
                            <div class="color-picker-wrap">
                                <input type="color" id="editorLinearEnd" value="#2E6EA6">
                                <input type="text" class="slider-value color-hex-input" id="editorLinearEndLabel" value="#2E6EA6" maxlength="7" spellcheck="false">
                            </div>
                        </div>
                    </div>
                    <div id="editorBgMeshRows" class="hidden">
                        <div id="editorMeshColorList"></div>
                        <button class="btn btn-ghost btn-sm" id="editorMeshAddColor" style="margin-top:6px;width:100%">
                            <i data-lucide="plus"></i>
                            Add color
                        </button>
                    </div>
                </div>
            </div>

            <!-- Layers panel -->
            <div class="panel-float hidden" id="panelLayers">
                <div class="section-header">
                    <span class="section-title">Layers</span>
                </div>
                <div class="section-content">
                    <div class="editor-layer-list" id="editorLayerList"></div>
                    <button class="editor-add-layer-btn" id="editorAddLayerBtn" title="Add icon layer">
                        <i data-lucide="plus"></i>
                        <span>Add layer</span>
                    </button>
                    <hr class="setting-divider">
                    <div id="editorLayerControls">
                        <div class="setting-row">
                            <span class="setting-label">Scale</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorScale" class="range-slider" min="10" max="150" value="100">
                                </div>
                                <input type="number" class="slider-value" id="editorScaleValue" min="10" max="150" value="100">
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Rotation</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorRotation" class="range-slider" min="-180" max="180" value="0">
                                </div>
                                <input type="number" class="slider-value" id="editorRotationValue" min="-180" max="180" value="0">
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Offset X</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorOffsetX" class="range-slider" min="-50" max="50" value="0">
                                </div>
                                <input type="number" class="slider-value" id="editorOffsetXValue" min="-50" max="50" value="0">
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Offset Y</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorOffsetY" class="range-slider" min="-50" max="50" value="0">
                                </div>
                                <input type="number" class="slider-value" id="editorOffsetYValue" min="-50" max="50" value="0">
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Opacity</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorOpacity" class="range-slider" min="0" max="100" value="100">
                                </div>
                                <input type="number" class="slider-value" id="editorOpacityValue" min="0" max="100" value="100">
                            </div>
                        </div>
                        <hr class="setting-divider">
                        <div class="setting-row">
                            <span class="setting-label">Tint</span>
                            <div class="segmented" id="editorTintEnabled">
                                <button class="seg-btn seg-on">Yes</button>
                                <button class="seg-btn seg-off active">No</button>
                            </div>
                        </div>
                        <div id="editorTintControls" class="hidden">
                            <div class="setting-row">
                                <span class="setting-label">Color</span>
                                <div class="color-picker-wrap">
                                    <input type="color" id="editorTintColor" value="#FF0000">
                                    <input type="text" class="slider-value color-hex-input" id="editorTintColorLabel" value="#FF0000" maxlength="7" spellcheck="false">
                                </div>
                            </div>
                        </div>
                        <hr class="setting-divider">
                        <div class="setting-row">
                            <span class="setting-label">Shadow</span>
                            <div class="segmented" id="editorShadowEnabled">
                                <button class="seg-btn seg-on">Yes</button>
                                <button class="seg-btn seg-off active">No</button>
                            </div>
                        </div>
                        <div id="editorShadowControls" class="hidden">
                            <div class="setting-row">
                                <span class="setting-label">Blur</span>
                                <div class="slider-row">
                                    <div class="slider-track-wrap">
                                        <input type="range" id="editorShadowBlur" class="range-slider" min="0" max="60" value="20">
                                    </div>
                                    <input type="number" class="slider-value" id="editorShadowBlurValue" min="0" max="60" value="20">
                                </div>
                            </div>
                            <div class="setting-row">
                                <span class="setting-label">Offset Y</span>
                                <div class="slider-row">
                                    <div class="slider-track-wrap">
                                        <input type="range" id="editorShadowOffsetY" class="range-slider" min="0" max="40" value="8">
                                    </div>
                                    <input type="number" class="slider-value" id="editorShadowOffsetYValue" min="0" max="40" value="8">
                                </div>
                            </div>
                            <div class="setting-row">
                                <span class="setting-label">Opacity</span>
                                <div class="slider-row">
                                    <div class="slider-track-wrap">
                                        <input type="range" id="editorShadowOpacity" class="range-slider" min="0" max="100" value="40">
                                    </div>
                                    <input type="number" class="slider-value" id="editorShadowOpacityValue" min="0" max="100" value="40">
                                </div>
                            </div>
                            <div class="setting-row">
                                <span class="setting-label">Color</span>
                                <div class="color-picker-wrap">
                                    <input type="color" id="editorShadowColor" value="#000000">
                                    <input type="text" class="slider-value color-hex-input" id="editorShadowColorLabel" value="#000000" maxlength="7" spellcheck="false">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            </div>
        </div>
    </div>

    <!-- Gallery overlay — hidden by default -->
    <div class="gallery-overlay" id="galleryOverlay">
        <header class="gallery-overlay-header">
            <div class="gallery-overlay-title">
                <i data-lucide="folder"></i>
                <span id="galleryCount">0 icons</span>
                <span class="gallery-picker-title">Select an icon to add</span>
            </div>
            <div class="gallery-overlay-actions">
                <button class="btn btn-ghost btn-sm" id="clearGalleryBtn">
                    Clear
                    <i data-lucide="trash-2"></i>
                </button>
                <button class="btn-icon btn-sm" id="galleryOverlayClose" title="Close gallery">
                    <i data-lucide="x"></i>
                </button>
            </div>
        </header>
        <div class="gallery" id="gallery">
            <div class="gallery-empty" id="galleryEmpty">
                <p>No generations yet</p>
            </div>
        </div>
    </div>

</div>

<!-- ================================================
     BOTTOM TOOLBAR
     ================================================ -->
<div class="bottom-toolbar" id="bottomToolbar">

    <!-- Style ribbon (always visible) -->
    <div class="style-ribbon" id="styleCards"></div>

    <!-- Axes ribbon (always visible, horizontal scroll) -->
    <div class="axes-ribbon" id="axesSliders"></div>

    <!-- Prompt container -->
    <div class="prompt-container" id="promptContainer">
        <div class="prompt-sections" id="promptSections">

            <!-- Enriched prompt section (expandable) -->
            <div class="prompt-section" id="enrichedSection">
                <div class="prompt-section-header">
                    <span class="section-title">Final prompt <span class="hint">(editable)</span></span>
                    <button class="btn-icon btn-sm" id="copyPromptBtn" title="Copy">
                        <i data-lucide="copy"></i>
                    </button>
                </div>
                <div class="prompt-section-body">
                    <textarea id="enrichedPrompt" class="enriched-prompt" placeholder="The enriched prompt will appear here. You can edit it before generating."></textarea>
                </div>
            </div>

        </div>

        <!-- Prompt bar -->
        <div class="prompt-bar">
            <button class="prompt-bar-btn" id="enrichedPromptToggle" title="Options">
                <i data-lucide="settings-2"></i>
            </button>
            <input type="text" id="promptInput" class="prompt-bar-input" placeholder="Choose a style to start...">
            <button class="prompt-bar-btn" id="fullPromptToggle" title="View full prompt">
                <i data-lucide="file-text"></i>
            </button>
            <button class="btn btn-primary generate-btn" id="generateBtn" disabled>
                <i data-lucide="arrow-up"></i>
            </button>
        </div>
    </div>
    <p class="prompt-hint">&#8984;Enter to generate</p>

</div>

<!-- ================================================
     SETTINGS MODAL
     ================================================ -->

<!-- About Modal -->
<div class="modal-overlay" id="aboutModal">
    <div class="modal-content about-modal">
        <button class="about-close" id="aboutClose">
            <i data-lucide="x"></i>
        </button>
        <img src="assets/light.png" alt="Icon Lab" class="about-logo logo-dark">
        <img src="assets/dark.png" alt="Icon Lab" class="about-logo logo-light">
        <p class="about-version">Version <span class="version-number">0.84</span></p>
        <p class="about-description">A free tool for generating and iterating on app icon designs using AI. Customize prompts, layers, and backgrounds — all in the browser.</p>
        <p class="about-description about-description-secondary">Bring your own key — add your OpenAI API key in settings to get started. Your key is stored locally on your device and is never sent anywhere other than directly to OpenAI.</p>
        <div class="about-links">
            <a href="https://github.com/cassardp/iconlab" target="_blank" rel="noopener">
                <i data-lucide="github"></i> GitHub
            </a>
        </div>
        <p class="about-author">Made by <a href="https://x.com/patricecassard" target="_blank" rel="noopener">Patrice Cassard</a></p>
    </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<!-- Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="js/config.js"></script>
<script src="js/state.js"></script>
<script src="js/prompt-builder.js"></script>
<script src="js/api-openai.js"></script>
<script src="js/gallery.js"></script>
<script src="js/editor.js"></script>
<script src="js/editor-layers.js"></script>
<script src="js/editor-preview.js"></script>
<script src="js/editor-events.js"></script>
<script src="js/events.js"></script>
<script src="app.js"></script>

</body>
</html>
