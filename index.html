<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icon Lab — AI App Icon Generator</title>
    <meta name="description" content="Generate and iterate on app icon designs using OpenAI GPT Image. Test prompts, customize layers, backgrounds, and export production-ready icons.">

    <!-- Canonical -->
    <link rel="canonical" href="https://iconlab.app/">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Icon Lab — AI App Icon Generator">
    <meta property="og:description" content="Generate and iterate on app icon designs using OpenAI GPT Image. Test prompts, customize layers, and export production-ready icons.">
    <meta property="og:site_name" content="Icon Lab">
    <meta property="og:url" content="https://iconlab.app/">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Icon Lab — AI App Icon Generator">
    <meta name="twitter:description" content="Generate and iterate on app icon designs using OpenAI GPT Image. Test prompts, customize layers, and export production-ready icons.">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Vercel Analytics -->
    <script defer src="/_vercel/insights/script.js"></script>

    <!-- App CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<!-- ================================================
     TOPBAR
     ================================================ -->
<header class="topbar">
    <div class="topbar-left">
        <img src="assets/light.png" alt="Icon Lab" class="topbar-logo logo-dark">
        <img src="assets/dark.png" alt="Icon Lab" class="topbar-logo logo-light">
    </div>
    <div class="topbar-center">
        <button class="export-btn disabled" id="editorExportBtn" title="Export">
            <i data-lucide="download"></i>
            <span>Export</span>
        </button>
    </div>
    <div class="topbar-right">
        <button class="topbar-btn" id="aboutBtn" title="About Icon Lab">
            <i data-lucide="info"></i>
        </button>
        <button class="topbar-btn" id="settingsBtn" title="Settings">
            <i data-lucide="settings"></i>
        </button>
        <button class="topbar-btn" id="themeToggle" title="Toggle theme">
            <i data-lucide="moon" class="icon-moon"></i>
            <i data-lucide="sun" class="icon-sun"></i>
        </button>
    </div>
</header>

<!-- ================================================
     MAIN AREA
     ================================================ -->
<div class="main">

    <!-- Left toolbar (floating) -->
    <div class="toolbar-left">
        <button class="toolbar-left-btn" id="galleryToggle" title="Gallery">
            <i data-lucide="folder"></i>
        </button>
    </div>

    <!-- Canvas area (centre) -->
    <div class="canvas-area">
        <!-- Size selector (floating, above icon) -->
        <div class="size-selector disabled" id="sizeSelector">
            <div class="topbar-size-wrap" id="sizeDropdownWrap">
                <button class="topbar-size-btn" id="sizeDropdownBtn">
                    <span id="sizeDropdownLabel">512px</span>
                    <i data-lucide="chevron-down" class="topbar-size-chevron"></i>
                </button>
                <div class="topbar-size-menu hidden" id="sizeDropdownMenu">
                    <button class="topbar-size-option" data-size="64">64px</button>
                    <button class="topbar-size-option" data-size="128">128px</button>
                    <button class="topbar-size-option" data-size="256">256px</button>
                    <button class="topbar-size-option active" data-size="512">512px</button>
                </div>
            </div>
        </div>
        <!-- Preview frame -->
        <div class="preview-frame" id="previewFrame">
            <div class="preview-placeholder" id="previewPlaceholder"></div>
            <div class="editor-canvas-wrap hidden" id="editorCanvasWrap">
                <div class="editor-icon-container" id="editorIconContainer"></div>
            </div>
        </div>
    </div>

    <!-- Right toolbar + panels (editor controls) -->
    <div class="toolbar-right disabled" id="toolbarRight">
        <div class="toolbar-right-btns">
            <button class="toolbar-right-btn" data-panel="panelBackground" title="Background">
                <i data-lucide="scan"></i>
            </button>
            <button class="toolbar-right-btn" data-panel="panelLayers" title="Layers">
                <i data-lucide="layers"></i>
            </button>
            <button class="toolbar-right-btn" data-panel="panelEffects" title="Effects">
                <i data-lucide="sliders-horizontal"></i>
            </button>
            <div class="toolbar-right-panel hidden" id="toolbarRightPanel">

            <!-- Background panel -->
            <div class="panel-float hidden" id="panelBackground">
                <div class="section-header">
                    <span class="section-title">Background</span>
                </div>
                <div class="section-content">
                    <div class="setting-row">
                        <span class="setting-label">Type</span>
                        <select id="editorBgType">
                            <option value="none">None (transparent)</option>
                            <option value="solid">Solid color</option>
                            <option value="gradient">Radial gradient</option>
                            <option value="linear">Linear gradient</option>
                            <option value="mesh">Mesh gradient</option>
                        </select>
                    </div>
                    <div class="setting-row" id="editorBgSolidRow">
                        <span class="setting-label">Color</span>
                        <div class="color-picker-wrap">
                            <input type="color" id="editorBgColor" value="#4A90D9">
                            <span class="color-picker-label active" id="editorBgColorLabel">#4A90D9</span>
                        </div>
                    </div>
                    <div id="editorBgGradientRows" class="hidden">
                        <div class="setting-row">
                            <span class="setting-label">Center</span>
                            <div class="color-picker-wrap">
                                <input type="color" id="editorGradientCenter" value="#5BC0EB">
                                <span class="color-picker-label active" id="editorGradientCenterLabel">#5BC0EB</span>
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Edge</span>
                            <div class="color-picker-wrap">
                                <input type="color" id="editorGradientEdge" value="#2E6EA6">
                                <span class="color-picker-label active" id="editorGradientEdgeLabel">#2E6EA6</span>
                            </div>
                        </div>
                    </div>
                    <div id="editorBgLinearRows" class="hidden">
                        <div class="setting-row">
                            <span class="setting-label">Direction</span>
                            <div class="direction-picker" id="editorLinearDirection">
                                <button class="dir-btn" data-angle="315" title="Top-left">&#x2196;</button>
                                <button class="dir-btn" data-angle="0" title="Up">&#x2191;</button>
                                <button class="dir-btn" data-angle="45" title="Top-right">&#x2197;</button>
                                <button class="dir-btn" data-angle="270" title="Left">&#x2190;</button>
                                <span class="dir-center"></span>
                                <button class="dir-btn" data-angle="90" title="Right">&#x2192;</button>
                                <button class="dir-btn" data-angle="225" title="Bottom-left">&#x2199;</button>
                                <button class="dir-btn" data-angle="180" title="Down">&#x2193;</button>
                                <button class="dir-btn" data-angle="135" title="Bottom-right">&#x2198;</button>
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Start</span>
                            <div class="color-picker-wrap">
                                <input type="color" id="editorLinearStart" value="#5BC0EB">
                                <span class="color-picker-label active" id="editorLinearStartLabel">#5BC0EB</span>
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">End</span>
                            <div class="color-picker-wrap">
                                <input type="color" id="editorLinearEnd" value="#2E6EA6">
                                <span class="color-picker-label active" id="editorLinearEndLabel">#2E6EA6</span>
                            </div>
                        </div>
                    </div>
                    <div id="editorBgMeshRows" class="hidden">
                        <div id="editorMeshColorList"></div>
                        <button class="btn btn-ghost btn-sm" id="editorMeshAddColor" style="margin-top:4px;width:100%">
                            <i data-lucide="plus"></i>
                            Add color
                        </button>
                    </div>
                </div>
            </div>

            <!-- Layers panel -->
            <div class="panel-float hidden" id="panelLayers">
                <div class="section-header">
                    <span class="section-title">Layers</span>
                    <div style="display:flex;gap:2px;">
                        <button class="btn-icon btn-sm" id="editorResetBtn" title="Reset all">
                            <i data-lucide="rotate-ccw"></i>
                        </button>
                        <button class="btn-icon btn-sm" id="editorAddLayerBtn" title="Add icon layer">
                            <i data-lucide="plus"></i>
                        </button>
                    </div>
                </div>
                <div class="section-content">
                    <div class="editor-layer-list" id="editorLayerList"></div>
                    <div id="editorLayerControls">
                        <div class="setting-row">
                            <span class="setting-label">Scale</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorScale" class="range-slider" min="10" max="150" value="100">
                                </div>
                                <span class="slider-value" id="editorScaleValue">100%</span>
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Rotation</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorRotation" class="range-slider" min="-180" max="180" value="0">
                                </div>
                                <span class="slider-value" id="editorRotationValue">0°</span>
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Offset X</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorOffsetX" class="range-slider" min="-50" max="50" value="0">
                                </div>
                                <span class="slider-value" id="editorOffsetXValue">0%</span>
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Offset Y</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorOffsetY" class="range-slider" min="-50" max="50" value="0">
                                </div>
                                <span class="slider-value" id="editorOffsetYValue">0%</span>
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Opacity</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorOpacity" class="range-slider" min="0" max="100" value="100">
                                </div>
                                <span class="slider-value" id="editorOpacityValue">100%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Effects panel -->
            <div class="panel-float hidden" id="panelEffects">
                <div class="section-header">
                    <span class="section-title">Effects</span>
                </div>
                <div class="section-content">
                    <div class="setting-row">
                        <span class="setting-label">Tint</span>
                        <label class="toggle">
                            <input type="checkbox" id="editorTintEnabled">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div id="editorTintControls" class="hidden">
                        <div class="setting-row">
                            <span class="setting-label">Color</span>
                            <div class="color-picker-wrap">
                                <input type="color" id="editorTintColor" value="#FF0000">
                                <span class="color-picker-label active" id="editorTintColorLabel">#FF0000</span>
                            </div>
                        </div>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">Shadow</span>
                        <label class="toggle">
                            <input type="checkbox" id="editorShadowEnabled">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div id="editorShadowControls" class="hidden">
                        <div class="setting-row">
                            <span class="setting-label">Blur</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorShadowBlur" class="range-slider" min="0" max="60" value="20">
                                </div>
                                <span class="slider-value" id="editorShadowBlurValue">20px</span>
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Offset Y</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorShadowOffsetY" class="range-slider" min="0" max="40" value="8">
                                </div>
                                <span class="slider-value" id="editorShadowOffsetYValue">8px</span>
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Opacity</span>
                            <div class="slider-row">
                                <div class="slider-track-wrap">
                                    <input type="range" id="editorShadowOpacity" class="range-slider" min="0" max="100" value="40">
                                </div>
                                <span class="slider-value" id="editorShadowOpacityValue">40%</span>
                            </div>
                        </div>
                        <div class="setting-row">
                            <span class="setting-label">Color</span>
                            <div class="color-picker-wrap">
                                <input type="color" id="editorShadowColor" value="#000000">
                                <span class="color-picker-label active" id="editorShadowColorLabel">#000000</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            </div>
        </div>
    </div>

    <!-- Gallery overlay — hidden by default -->
    <div class="gallery-overlay" id="galleryOverlay">
        <header class="gallery-overlay-header">
            <div class="gallery-overlay-title">
                <i data-lucide="folder"></i>
                <span id="galleryCount">0 icons</span>
                <span class="gallery-picker-title">Select an icon to add</span>
            </div>
            <div class="gallery-overlay-actions">
                <button class="btn btn-ghost btn-sm" id="clearGalleryBtn">
                    Clear
                    <i data-lucide="trash-2"></i>
                </button>
                <button class="btn-icon btn-sm" id="galleryOverlayClose" title="Close gallery">
                    <i data-lucide="x"></i>
                </button>
            </div>
        </header>
        <div class="gallery" id="gallery">
            <div class="gallery-empty" id="galleryEmpty">
                <p>No generations yet</p>
            </div>
        </div>
    </div>

</div>

<!-- ================================================
     BOTTOM BLOCK
     ================================================ -->
<div class="bottom-block">

    <!-- Style cards -->
    <div class="style-cards" id="styleCards"></div>

    <!-- Prompt bar -->
    <div class="prompt-bar">
        <button class="prompt-bar-btn" id="moreOptionsBtn" title="More options">
            <i data-lucide="sliders-horizontal"></i>
        </button>
        <input type="text" id="promptInput" class="prompt-bar-input" placeholder="Describe your icon...">
        <button class="prompt-bar-btn" id="enrichedPromptToggle" title="View full prompt">
            <i data-lucide="file-text"></i>
        </button>
        <button class="btn btn-primary btn-sm" id="generateBtn" disabled>
            Generate
            <i data-lucide="arrow-up"></i>
        </button>
    </div>

    <!-- Popover: enriched prompt -->
    <div class="popover hidden" id="enrichedPromptPopover">
        <div class="popover-header">
            <span class="section-title">Final prompt <span class="hint">(editable)</span></span>
            <button class="btn-icon btn-sm" id="copyPromptBtn" title="Copy">
                <i data-lucide="copy"></i>
            </button>
        </div>
        <textarea id="enrichedPrompt" class="enriched-prompt" placeholder="The enriched prompt will appear here. You can edit it before generating."></textarea>
    </div>

    <!-- Popover: more options (axes, material, color) -->
    <div class="popover hidden" id="moreOptionsPopover">
        <div class="popover-header">
            <span class="section-title">Options</span>
        </div>
        <div class="section-content">
            <div id="axesSliders">
                <!-- Generated dynamically by JS from App.AXES -->
            </div>
            <div class="setting-row">
                <span class="setting-label">Material</span>
                <select id="materialSelect"></select>
            </div>
            <div class="setting-row" id="colorRow">
                <span class="setting-label">Color</span>
                <div class="color-picker-wrap">
                    <input type="color" id="colorPicker" value="#4A90D9" class="inactive">
                    <span class="color-picker-label" id="colorPickerLabel">None</span>
                    <button class="btn-icon btn-sm color-picker-reset hidden" id="colorPickerReset" title="Reset">
                        <i data-lucide="x"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- ================================================
     SETTINGS MODAL
     ================================================ -->
<div class="modal-overlay" id="settingsModal">
    <div class="modal-content settings-modal">
        <div class="settings-modal-header">
            <span>Settings</span>
            <button class="btn-icon btn-sm" id="settingsModalClose">
                <i data-lucide="x"></i>
            </button>
        </div>
        <div class="section-content">
            <div class="setting-row">
                <span class="setting-label">API Key</span>
                <div class="api-key-wrap">
                    <input type="password" id="apiKeyInput" placeholder="sk-..." autocomplete="off">
                    <button type="button" id="apiKeyToggle" title="Show/hide key">
                        <i data-lucide="eye"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- About Modal -->
<div class="modal-overlay" id="aboutModal">
    <div class="modal-content about-modal">
        <button class="about-close" id="aboutClose">
            <i data-lucide="x"></i>
        </button>
        <img src="assets/light.png" alt="Icon Lab" class="about-logo logo-dark">
        <img src="assets/dark.png" alt="Icon Lab" class="about-logo logo-light">
        <p class="about-version">Version <span class="version-number">0.66</span></p>
        <p class="about-description">A free tool for generating and iterating on app icon designs using AI. Customize prompts, layers, and backgrounds — all in the browser.</p>
        <div class="about-links">
            <a href="https://github.com/cassardp/iconlab" target="_blank" rel="noopener">
                <i data-lucide="github"></i> GitHub
            </a>
        </div>
        <p class="about-author">Made by <a href="https://x.com/patricecassard" target="_blank" rel="noopener">Patrice Cassard</a></p>
    </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<!-- Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="js/config.js"></script>
<script src="js/state.js"></script>
<script src="js/prompt-builder.js"></script>
<script src="js/api-openai.js"></script>
<script src="js/gallery.js"></script>
<script src="js/editor.js"></script>
<script src="js/editor-layers.js"></script>
<script src="js/editor-preview.js"></script>
<script src="js/editor-events.js"></script>
<script src="js/events.js"></script>
<script src="app.js"></script>

</body>
</html>
